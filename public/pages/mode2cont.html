<!DOCTYPE html>

  <html>

    <head>
      <title>CPEN291 Drawbot</title>
      <meta charset="utf-8">
      <link rel="stylesheet" type="text/css" href="../styles/style.css">
    </head>

    <body>

      <header>
        <div class="container">
          <div class="logo">
            <img src="../styles/logo.jpg" alt="Drawbot Logo">
          </div>
          <nav class="navigation-top">
            <ul>
              <li><a href="../index.html" class="nav-link">Home</a></li>
              <li><a href="mode1cont.html" class="nav-link">Mode1</a></li>
              <li><a href="#" class="nav-link">Mode2</a></li>
              <li><a href="showcase.html" class="nav-link">Showcase</a></li>
            </ul>

            <div class="dropdown">
              <button class="button-dropdown">Menu</button>
              <div class="dropdown-content">
                <a href="../index.html">Home</a>
                <a href="mode1cont.html">Mode 1</a>
                <a href="showcase.html">Showcase</a>
              </div>
            </div>
          </nav>
        </div>
      </header>

      <main>

        <section class="mode-2-instruction">
          <h1>MODE 2</h1>
          <h2>Control the robot with the buttons</h2>
          <h3>① Press W, A, S, D to move the robot forward, backward, left, and right</h3>
          <h3>② Press ↑ and ↓ to lift the drawing tool up and down</h3>
        </section>

        <section class="fill">
          <h2>Control Console</h2>
        </section>

        <section class="controlpad">

          <div class = "controlpad-left">
            <div class = "controlpad-top">
              <input type = "button" id = "left" onclick = "move_forward()" value ="↖">
              <input type = "button" id = "forward" onclick=" move_right()" value ="↑">
              <input type = "button" id = "right" onclick=" move_right()" value ="↗">
            </div>
            <div class="controlpad-bottom">
              <input type = "button" id = "left-back" onclick=" move_left()" value ="↙">
              <input type = "button" id = "backward" onclick=" move_backward()" value ="↓">
              <input type = "button" id = "right-back" onclick=" move_right()" value ="↘">
            </div>
          </div>
          <div class = "controlpad-right">
            <div class = "controlpad-top">
              <input type = "button" id = "up" onclick="lift_up()" value="↑↑">
            </div>
            <div class="controlpad-bottom">
              <input type = "button" id = "down" onclick="lift_down()" value="↓↓">
            </div>
          </div>
          
        </section>

      </main>

      <footer>
        <p>Updated: March 31st, 2022</p>
      </footer>

      <script src="/socket.io/socket.io.js"> </script>
      <script>
        const socket = io();
        const timeout = 200;

        const forwardbtn = document.getElementById("forward");
        forwardbtn.addEventListener("click", () =>{
          forward.style.backgroundColor = "rgba(119, 255, 255, 100)";
          forward.style.color = "#001B48";
          socket.emit('forward_cmd', forwardbtn.value);    
          setTimeout(() => {
            forward.style.backgroundColor = "rgba(0, 0, 0, 0)";
            forward.style.color = "rgba(119, 255, 255, 100)";  
          }, timeout);
        });

        const backwardbtn = document.getElementById("backward");
        backwardbtn.addEventListener("click", () =>{
          backward.style.backgroundColor = "rgba(119, 255, 255, 100)";
          backward.style.color = "#001B48";
          socket.emit('backward_cmd', backwardbtn.value);  
          setTimeout(() => {
            backward.style.backgroundColor = "rgba(0, 0, 0, 0)";
            backward.style.color = "rgba(119, 255, 255, 100)";   
          }, timeout);
        });

        const rightbtn = document.getElementById("right");
        rightbtn.addEventListener("click", () =>{
          right.style.backgroundColor = "rgba(119, 255, 255, 100)";
          right.style.color = "#001B48";
          socket.emit('right_cmd', rightbtn.value);   
          setTimeout(() => {
            right.style.backgroundColor = "rgba(0, 0, 0, 0)";
            right.style.color = "rgba(119, 255, 255, 100)";    
          }, timeout);     
        });

        const leftbtn = document.getElementById("left");
        leftbtn.addEventListener("click", () =>{
          left.style.backgroundColor = "rgba(119, 255, 255, 100)";
          left.style.color = "#001B48";
          socket.emit('left_cmd', leftbtn.value);   
          setTimeout(() => {
            left.style.backgroundColor = "rgba(0, 0, 0, 0)";
            left.style.color = "rgba(119, 255, 255, 100)";       
          }, timeout);   
        });

        const upbtn = document.getElementById("up");
        upbtn.addEventListener("click", ()=>{
          up.style.backgroundColor = "rgba(119, 255, 255, 100)";
          up.style.color = "#001B48";
          socket.emit('up', upbtn.value);
          setTimeout(() => {
            up.style.backgroundColor = "rgba(0, 0, 0, 0)";
            up.style.color = "rgba(119, 255, 255, 100)";   
          }, timeout);  
        });

        const downbtn = document.getElementById("down");
        downbtn.addEventListener("click", ()=>{
          down.style.backgroundColor = "rgba(119, 255, 255, 100)";
          down.style.color = "#001B48";
          socket.emit('down', downbtn.value);
          setTimeout(() => {
            down.style.backgroundColor = "rgba(0, 0, 0, 0)";
            down.style.color = "rgba(119, 255, 255, 100)";     
          }, timeout);
        });

        const backleftbtn = document.getElementById("left-back");
        backleftbtn.addEventListener("click", ()=>{
          down.style.backgroundColor = "rgba(119, 255, 255, 100)";
          down.style.color = "#001B48";
          socket.emit('back_left_cmd', backleftbtn.value);
          setTimeout(() => {
            down.style.backgroundColor = "rgba(0, 0, 0, 0)";
            down.style.color = "rgba(119, 255, 255, 100)";     
          }, timeout);
        });

        const backrightbtn = document.getElementById("right-back");
        backrightbtn.addEventListener("click", ()=>{
          down.style.backgroundColor = "rgba(119, 255, 255, 100)";
          down.style.color = "#001B48";
          socket.emit('back_right_cmd', backrightbtn.value);
          setTimeout(() => {
            down.style.backgroundColor = "rgba(0, 0, 0, 0)";
            down.style.color = "rgba(119, 255, 255, 100)";     
          }, timeout);
        });

      </script>

    </body>

  </html>